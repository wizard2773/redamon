# =============================================================================
# RedAmon - Development Overrides
# =============================================================================
# Usage:  docker compose -f docker-compose.yml -f docker-compose.dev.yml up -d
# =============================================================================
# Swaps the production webapp build for a dev container with Next.js fast
# refresh. Source code is volume-mounted so every save is reflected instantly.
# =============================================================================

services:
  webapp:
    build: !reset null
    image: node:22-alpine
    working_dir: /app
    command: sh -c "npm install && npx prisma db push && npm run dev"
    volumes:
      - ./webapp:/app
      - webapp_node_modules:/app/node_modules
      - webapp_next_cache:/app/.next

volumes:
  webapp_node_modules:
  webapp_next_cache:
